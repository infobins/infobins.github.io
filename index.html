<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
</head>
<body>
    test info



    <script>

        function setl() {

            document.getElementById('s').innerHTML = loop;
            loop++;
        }

        var loop = 1;
        function test1() {
            loop = 1;
            setl();
            document.getElementById('txt1').value = '';
            var miliStart = parseInt(new Date().getTime());


            var cnt = parseInt(document.getElementById('cnt').value);
            for (var i = 0; i < cnt; i++) {
                fetch(ur + i + '.png').then(r => r.arrayBuffer()).then(t => {
                    var miliEnd = parseInt(new Date().getTime());
                    document.getElementById('txt1').value = (miliEnd - miliStart);
                    setl();
                });
            }
        }

        function test2() {
            loop = 1;
            setl();
            document.getElementById('txt2').value = '';
            var miliStart = parseInt(new Date().getTime());

            var cnt = parseInt(document.getElementById('cnt').value);

            fetch('https://infobinaa.bsite.net/test2?cnt=' + cnt).then(r => r.text()).then(t => {
                var miliEnd = parseInt(new Date().getTime());
                document.getElementById('txt2').value = (miliEnd - miliStart);
                loop = cnt + 1;
                setl();

            });

        }

        function il() {
            var miliEnd = parseInt(new Date().getTime());
            document.getElementById('txt3').value = (miliEnd - miliStart3);
            setl();
        }

        const limg = function loadImage(url, elem) {
            return new Promise((resolve, reject) => {
                elem.onload = function () {
                    il()
                    resolve(elem);
                };
                elem.onerror = reject;
                elem.src = url;
            });
        }


        var miliStart3;



        function test3() {
            loop = 1;
            setl();
            document.getElementById('txt3').value = '';
            miliStart3 = parseInt(new Date().getTime());

            var cnt = parseInt(document.getElementById('cnt').value);
            var a = [];
            for (var i = 0; i < cnt; i++) {
                var u = ur + i + '.png';
                var image = new Image();
                image.src = u;

            }

            setTimeout(function () {
                var cnt = parseInt(document.getElementById('cnt').value);
                var a = [];
                for (var i = 0; i < cnt; i++) {
                    fetch(u).then(r => r.arrayBuffer()).then(t => {
                        var miliEnd = parseInt(new Date().getTime());
                        document.getElementById('txt3').value = (miliEnd - miliStart3);
                        setl();

                    });

                }
            }, 3);



        }

        function test4() {
            loop = 1;
            setl();
            document.getElementById('txt4').value = '';
            miliStart3 = parseInt(new Date().getTime());

            var cnt = parseInt(document.getElementById('cnt').value);
            var a = [];
            for (var i = 0; i < cnt; i++) {
                var u = ur + i + '.png';
                var iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                iframe.onload = function () {
                    var miliEnd = parseInt(new Date().getTime());
                    document.getElementById('txt4').value = (miliEnd - miliStart3);
                    setl();

                };
                iframe.src = u;
                document.body.appendChild(iframe);

            }


        }


        function ne(f) {
            ur = 'https://infobins.github.io/images/s/a';
            f();
        }

        function n(f) {
            ur = 'https://infobinaa.bsite.net/a';
            f();
        }


    </script>



    <span id="s">NNNN</span><br />
    <input type="text" id="cnt" value="24" /><br />
    <button onclick="n(test1)">TEST 1</button> <button onclick="ne(test1)">TEST 1 N</button><br />
    <input type="text" id="txt1" value="" /><br />
    <button onclick="n(test2)">TEST 2</button><button onclick="ne(test2)">TEST 2 N</button><br />
    <input type="text" id="txt2" value="" /><br />
    <button onclick="n(test3)">TEST 3</button><button onclick="ne(test3)">TEST 3 N</button><br />
    <input type="text" id="txt3" value="" /><br />
    <button onclick="n(test4)">TEST 4</button><button onclick="ne(test4)">TEST 4 N</button><br />
    <input type="text" id="txt4" value="" /><br />

    <div id="images">

    </div>

</body>
</html>